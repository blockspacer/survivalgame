[gd_scene load_steps=12 format=2]

[ext_resource path="res://clouds/scene.gd" type="Script" id=1]
[ext_resource path="res://clouds/Sky.shader" type="Shader" id=2]
[ext_resource path="res://clouds/noise.png" type="Texture" id=3]
[ext_resource path="res://clouds/Sky.gd" type="Script" id=4]
[ext_resource path="res://default_env.tres" type="Environment" id=5]
[ext_resource path="res://scripts/scene_cam.gd" type="Script" id=6]

[sub_resource type="Gradient" id=1]
offsets = PoolRealArray( 0, 0.5, 1 )
colors = PoolColorArray( 0, 0.529412, 1, 1, 0.513726, 0.862745, 1, 1, 0, 0.0235294, 0.227451, 1 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )
width = 1024

[sub_resource type="ShaderMaterial" id=3]
shader = ExtResource( 2 )
shader_param/iTime = null
shader_param/iFrame = null
shader_param/COVERAGE = 0.5
shader_param/THICKNESS = 25.0
shader_param/ABSORPTION = 1.031
shader_param/STEPS = 25
shader_param/WIND_VEC = Vector3( 0.01, 0, 0.01 )
shader_param/iChannel0 = ExtResource( 3 )

[sub_resource type="ImageTexture" id=4]
size = Vector2( 1024, 512 )

[sub_resource type="ViewportTexture" id=5]
viewport_path = NodePath("Sky")

[node name="scene" type="Spatial"]
script = ExtResource( 1 )

[node name="Sky" type="Viewport" parent="."]
size = Vector2( 1024, 512 )
render_target_update_mode = 3

[node name="ColorRect" type="ColorRect" parent="Sky"]
visible = false
margin_right = 1024.0
margin_bottom = 512.0
color = Color( 0.384314, 0.258824, 0.521569, 1 )

[node name="TextureRect" type="TextureRect" parent="Sky"]
visible = false
margin_top = 512.0
margin_right = 512.0
margin_bottom = 1536.0
rect_rotation = -90.0
texture = SubResource( 2 )
expand = true

[node name="Sprite" type="Sprite" parent="Sky"]
material = SubResource( 3 )
texture = SubResource( 4 )
centered = false
script = ExtResource( 4 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, -0.76811, 0.640318, 0, -0.640318, -0.76811, 0, 3.84865, -5.0612 )

[node name="scene_cam" type="Camera" parent="."]
transform = Transform( -4.37114e-008, 0, 1, 0, 1, 0, -1, 0, -4.37114e-008, 6.36598, 2.33312, -0.261921 )
environment = ExtResource( 5 )
current = true
script = ExtResource( 6 )
mouse_mode = 0
sensitivity = 0.25
smoothness = 0.7
rotate_privot = true
collisions = false
max_speed = Vector3( 5, 5, 5 )

[node name="Control" type="Control" parent="."]
editor/display_folded = true
margin_right = 40.0
margin_bottom = 40.0

[node name="Label" type="Label" parent="Control"]
margin_left = 25.0
margin_top = 3.763
margin_right = 268.0
margin_bottom = 17.763
text = "Control: Arrow + Mouse (click + move)"

[node name="Label2" type="Label" parent="Control"]
margin_left = 14.0
margin_top = 30.103
margin_right = 112.0
margin_bottom = 44.103
text = "Clouds params:"

[node name="Label3" type="Label" parent="Control"]
margin_left = 14.0
margin_top = 68.469
margin_right = 82.0
margin_bottom = 82.469
text = "COVERAGE"

[node name="HScrollBar" type="HScrollBar" parent="Control/Label3"]
margin_left = 5.0
margin_top = 17.2915
margin_right = 145.0
margin_bottom = 30.2915
value = 50.0

[node name="Label4" type="Label" parent="Control"]
margin_left = 14.0
margin_top = 103.052
margin_right = 99.0
margin_bottom = 117.052
text = "ABSORPTION"

[node name="HScrollBar" type="HScrollBar" parent="Control/Label4"]
margin_left = 5.0
margin_top = 17.2916
margin_right = 145.0
margin_bottom = 29.2916
value = 10.0

[node name="Label5" type="Label" parent="Control"]
margin_left = 14.0
margin_top = 144.66
margin_right = 114.0
margin_bottom = 158.66
text = "THICKNESS"

[node name="HScrollBar" type="HScrollBar" parent="Control/Label5"]
margin_left = 5.0
margin_top = 16.2108
margin_right = 145.0
margin_bottom = 28.2108
value = 25.0

[node name="Label6" type="Label" parent="Control"]
margin_left = 14.0
margin_top = 179.14
margin_right = 99.0
margin_bottom = 193.14
text = "STEPS (1-100)"

[node name="HScrollBar" type="HScrollBar" parent="Control/Label6"]
margin_left = 5.0
margin_top = 16.2108
margin_right = 145.0
margin_bottom = 28.2108
value = 25.0

[node name="TextureRect" type="TextureRect" parent="Control"]
margin_left = 205.212
margin_top = 70.0593
margin_right = 1229.21
margin_bottom = 582.059
texture = SubResource( 5 )
[connection signal="gui_input" from="Control/Label3/HScrollBar" to="scene_cam" method="set_ui_input"]
[connection signal="value_changed" from="Control/Label3/HScrollBar" to="Sky/Sprite" method="cov_scb"]
[connection signal="gui_input" from="Control/Label4/HScrollBar" to="scene_cam" method="set_ui_input"]
[connection signal="value_changed" from="Control/Label4/HScrollBar" to="Sky/Sprite" method="absb_scb"]
[connection signal="gui_input" from="Control/Label5/HScrollBar" to="scene_cam" method="set_ui_input"]
[connection signal="value_changed" from="Control/Label5/HScrollBar" to="Sky/Sprite" method="thick_scb"]
[connection signal="gui_input" from="Control/Label6/HScrollBar" to="scene_cam" method="set_ui_input"]
[connection signal="value_changed" from="Control/Label6/HScrollBar" to="Sky/Sprite" method="step_scb"]
